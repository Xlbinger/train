<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>弹幕墙</title>
    <style>
        #qiang {
            font-size: 14px;
            padding-left:80px ;
            padding-right: 80px;
            padding-top: 40px;
        }

        #btn {
            text-align: center;
            margin: 0 auto;
            padding: 20px;
        }

        #text {
            position: absolute;
        }

        #scr {
            width: 100%;
            height: 400px;
            border: 2px solid rgb(229, 229, 229);
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div id="qiang">
        <div id="scr">
            <div id="show"></div>
        </div>
    
    <div id="btn">
        <input placeholder="输入弹幕" id="input" type="text">
        <button id="send">发送</button>
        <button id="clear">清屏</button>
    </div>
</div>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            /*发送弹幕*/
            $('#send').click(function () {
                var danmutext = $("#input").val(); //获取输入值
                //$("#input").val("");  //input 清零
                console.log(danmutext);

                var $qiang = $('<div id="text">' + danmutext + '</div>');
                //字体随机颜色
                var r = Math.floor(Math.random() * 256);
                var g = Math.floor(Math.random() * 256);
                var b = Math.floor(Math.random() * 256);
                //字体随机大小
                var f = Math.floor(Math.random() * 40);
                //速度大小
                var speed = Math.floor(Math.random() * 20000);

                $screen = $(document.getElementById("scr"));
                var top = Math.random() * ($screen.height()-40);
                $qiang.css({
                    top: top +42 + "px",
                    right: 86,
                    color: "rgb(" + r + "," + g + "," + b + ")",
                    fontSize: f + "px"
                });
                //弹幕最大值+展示区最大值(top)+padding-top+上下边框值=qiang的最大高度值
                $('#show').append($qiang);
                $qiang.animate({
                    right: $screen.width() + 84 - $qiang.width()
                }, speed, function () {
                    $(this).remove();
                });
            });
            $('#clear').click(function () {
                $('#show').empty();
            });

        });
    </script>
</body>

</html>